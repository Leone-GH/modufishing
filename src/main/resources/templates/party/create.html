<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>파티 생성</title>
  <link rel="stylesheet" href="/css/party-create.css">
  <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=API_KEY&libraries=services"></script>
</head>
<body>
<h1>파티 생성</h1>

<form id="partyForm" th:action="@{/party/save}" method="post">
  <label>제목:</label>
  <input type="text" name="title" required><br>

  <label>간단 설명:</label>
  <textarea name="description" required></textarea><br>

  <label>상세 설명:</label>
  <textarea name="detail"></textarea><br>

  <label>모집 대상 설명:</label>
  <textarea name="memberDetail"></textarea><br>

  <label>출발 시간:</label>
  <input type="datetime-local" name="departureTime" required><br>

  <label>마감 시간:</label>
  <input type="datetime-local" name="deadline" required><br>

  <label>출발지:</label>
  <input type="text" id="departurePoint" name="departurePoint" readonly><br>

  <label>목적지:</label>
  <input type="text" id="destination" name="destination" readonly><br>

  <label>모집 인원:</label>
  <input type="number" name="maxParticipants" required><br>

  <label>예상 비용(원):</label>
  <input type="number" id="estimatedCost" name="estimatedCost" readonly><br>

  <!-- Hidden 좌표 필드 -->
  <input type="hidden" name="departureLat" id="departureLat">
  <input type="hidden" name="departureLng" id="departureLng">
  <input type="hidden" name="destinationLat" id="destinationLat">
  <input type="hidden" name="destinationLng" id="destinationLng">

  <!-- 경유지, 파티원은 JSON 문자열로 hidden 필드에 담아 전송 -->
  <input type="hidden" name="waypointsJson" id="waypointsJson">
  <input type="hidden" name="partyMembersJson" id="partyMembersJson">

  <div id="map" style="width:100%;height:400px;margin-top:10px;"></div><br>

  <button type="button" id="openRouteSelect">경로 선택</button>
  <button type="submit">등록하기</button>
</form>

<!-- 모달: 경로 선택 카드 -->
<div id="routeModal" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); width:80%; background:white; border:1px solid gray; padding:20px;">
  <h2>경로 선택</h2>
  <div id="routeOptions"></div>
  <button id="closeRouteModal">닫기</button>
</div>

<script src="/js/party-create.js"></script>
</body>
</html>
